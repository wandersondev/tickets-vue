{"version":3,"file":"calendarWithEvents.js","names":["useCalendarBase","computed","ref","CalendarEventOverlapModes","isEventHiddenOn","isEventOn","isEventOverlapping","isEventStart","parseEvent","diffMinutes","getDayIdentifier","getPrefixedEventHandlers","propsFactory","WIDTH_FULL","WIDTH_START","MINUTES_IN_DAY","makeCalendarWithEventsProps","events","type","Array","default","eventStart","String","eventEnd","eventTimed","Function","eventCategory","eventHeight","Number","eventColor","eventTextColor","eventName","eventOverlapThreshold","eventOverlapMode","validate","mode","eventMore","Boolean","eventMoreText","eventRipple","Object","eventMarginBottom","useCalendarWithEvents","props","slots","attrs","base","noEvents","isArray","length","categoryMode","eventTimedFunction","event","eventCategoryFunction","parsedEvents","map","index","value","parsedEventOverlapThreshold","parseInt","eventTextColorFunction","eventNameFunction","timedEvent","input","eventModeFunction","eventWeekdays","effectiveWeekdays","eventColorFunction","e","color","eventsRef","updateEventVisibility","eventsMap","getEventsMap","date","parent","more","parentBounds","getBoundingClientRect","last","eventsSorted","bottom","sort","a","b","hidden","i","hide","style","display","innerHTML","locale","t","elements","forEach","el","getAttribute","parentElement","push","genDayEvent","_ref","day","dayIdentifier","week","start","startIdentifier","end","endIdentifier","width","weekdayIdentifier","scope","eventParsed","timed","genEvent","class","height","marginBottom","genTimedEvent","_ref2","left","endDelta","timeDelta","startDelta","top","timeToY","Math","max","scopeInput","data","slot","text","background","overlapsNoon","hour","singline","formatTime","withTime","ampm","formatter","getFormatter","timeZone","minute","undefined","timeSummary","eventSummary","name","hasTime","time","delimiter","_createElementVNode","_createTextVNode","outside","nativeEvent","_withDirectives","_mergeProps","getColorProps","genName","_resolveDirective","genPlaceholder","genMore","getVisibleEvents","days","filter","isEventForCategory","category","categoryName","getEventsForDay","identifier","firstWeekday","getEventsForDayAll","allDay","getEventsForDayTimed","getScopedSlots","isNode","getSlotChildren","getter","mapper","visuals","visual","children","column","mapped","concat"],"sources":["../../../../src/labs/VCalendar/composables/calendarWithEvents.tsx"],"sourcesContent":["// Styles\nimport './calendarWithEvents.sass'\n\n// Composables\nimport { useCalendarBase } from './calendarBase'\n\n// Utilities\nimport { computed, ref } from 'vue'\nimport { CalendarEventOverlapModes } from '../modes'\nimport {\n  isEventHiddenOn,\n  isEventOn,\n  isEventOverlapping,\n  isEventStart,\n  parseEvent,\n} from '../util/events'\nimport { diffMinutes, getDayIdentifier } from '../util/timestamp'\nimport { getPrefixedEventHandlers, propsFactory } from '@/util'\n\n// Types\nimport type { PropType, VNode } from 'vue'\nimport type { CalendarBaseProps } from './calendarBase'\nimport type {\n  CalendarCategory,\n  CalendarDayBodySlotScope,\n  CalendarDaySlotScope,\n  CalendarEvent,\n  CalendarEventCategoryFunction,\n  CalendarEventColorFunction,\n  CalendarEventNameFunction,\n  CalendarEventOverlapMode,\n  CalendarEventParsed,\n  CalendarEventTimedFunction,\n  CalendarEventVisual,\n  CalendarTimestamp,\n} from '../types'\n\n// Constants\nconst WIDTH_FULL = 100\nconst WIDTH_START = 95\nconst MINUTES_IN_DAY = 1440\n\ntype VEventGetter<D> = (day: D) => CalendarEventParsed[]\ntype VEventVisualToNode<D> = (visual: CalendarEventVisual, day: D) => VNode | false\ntype VEventsToNodes = <D extends CalendarDaySlotScope>(\n  day: D,\n  getter: VEventGetter<D>,\n  mapper: VEventVisualToNode<D>,\n  timed: boolean) => VNode[] | undefined\n\ntype VDailyEventsMap = {\n  [date: string]: {\n    parent: HTMLElement\n    more: HTMLElement | null\n    events: HTMLElement[]\n  }\n}\n\nexport interface VEventScopeInput {\n  eventParsed: CalendarEventParsed\n  day: CalendarDaySlotScope\n  start: boolean\n  end: boolean\n  timed: boolean\n}\n\nexport const makeCalendarWithEventsProps = propsFactory({\n  events: {\n    type: Array as PropType<CalendarEvent[]>,\n    default: () => [],\n  },\n  eventStart: {\n    type: String,\n    default: 'start',\n  },\n  eventEnd: {\n    type: String,\n    default: 'end',\n  },\n  eventTimed: {\n    type: [String, Function] as PropType<string | CalendarEventTimedFunction>,\n    default: 'timed',\n  },\n  eventCategory: {\n    type: [String, Function] as PropType<string | CalendarEventCategoryFunction>,\n    default: 'category',\n  },\n  eventHeight: {\n    type: Number,\n    default: 20,\n  },\n  eventColor: {\n    type: [String, Function] as PropType<string | CalendarEventColorFunction>,\n    default: 'primary',\n  },\n  eventTextColor: {\n    type: [String, Function] as PropType<string | CalendarEventColorFunction>,\n  },\n  eventName: {\n    type: [String, Function] as PropType<string | CalendarEventNameFunction>,\n    default: 'name',\n  },\n  eventOverlapThreshold: {\n    type: [String, Number],\n    default: 60,\n  },\n  eventOverlapMode: {\n    type: [String, Function] as PropType<'stack' | 'column' | CalendarEventOverlapMode>,\n    default: 'stack',\n    validate: (mode: any) => mode in CalendarEventOverlapModes || typeof mode === 'function',\n  },\n  eventMore: {\n    type: Boolean,\n    default: true,\n  },\n  eventMoreText: {\n    type: String,\n    default: '$vuetify.calendar.moreEvents',\n  },\n  eventRipple: {\n    type: [Boolean, Object],\n    default: null,\n  },\n  eventMarginBottom: {\n    type: Number,\n    default: 1,\n  },\n}, 'VCalendar-events')\n\ninterface CalendarWithEventsProps extends CalendarBaseProps {\n  events: CalendarEvent[]\n  eventStart: string\n  eventEnd: string\n  eventTimed: string | CalendarEventTimedFunction\n  eventCategory: string | CalendarEventCategoryFunction\n  eventHeight: number\n  eventColor: string | CalendarEventColorFunction\n  eventTextColor: string | CalendarEventColorFunction | undefined\n  eventName: string | CalendarEventNameFunction\n  eventOverlapThreshold: string | number\n  eventOverlapMode: string | CalendarEventOverlapMode\n  eventMore: boolean\n  eventMoreText: string\n  eventRipple: boolean | object | null | undefined\n  eventMarginBottom: number\n  type: 'month' | 'week' | 'day' | '4day' | 'custom-weekly' | 'custom-daily' | 'category'\n}\n\nexport function useCalendarWithEvents (props: CalendarWithEventsProps, slots: any, attrs: any) {\n  const base = useCalendarBase(props)\n\n  const noEvents = computed((): boolean => {\n    return !Array.isArray(props.events) || props.events.length === 0\n  })\n\n  const categoryMode = computed((): boolean => {\n    return props.type === 'category'\n  })\n\n  const eventTimedFunction = computed((): CalendarEventTimedFunction => {\n    return typeof props.eventTimed === 'function'\n      ? props.eventTimed\n      : event => !!event[props.eventTimed as string]\n  })\n\n  const eventCategoryFunction = computed((): CalendarEventCategoryFunction => {\n    return typeof props.eventCategory === 'function'\n      ? props.eventCategory\n      : event => event[props.eventCategory as string]\n  })\n\n  const parsedEvents = computed((): CalendarEventParsed[] => {\n    if (!props.events) return []\n    return props.events.map((event, index) => parseEvent(\n      event,\n      index,\n      props.eventStart || '',\n      props.eventEnd || '',\n      eventTimedFunction.value(event),\n      categoryMode.value ? eventCategoryFunction.value(event) : false,\n    ))\n  })\n\n  const parsedEventOverlapThreshold = computed((): number => {\n    return parseInt(String(props.eventOverlapThreshold || 0))\n  })\n\n  const eventTextColorFunction = computed((): CalendarEventColorFunction => {\n    return typeof props.eventTextColor === 'function'\n      ? props.eventTextColor\n      : () => props.eventTextColor as string\n  })\n\n  const eventNameFunction = computed((): CalendarEventNameFunction => {\n    return typeof props.eventName === 'function'\n      ? props.eventName\n      : (event, timedEvent) => event.input[props.eventName as string] as string || ''\n  })\n\n  const eventModeFunction = computed((): CalendarEventOverlapMode => {\n    return typeof props.eventOverlapMode === 'function'\n      ? props.eventOverlapMode\n      : CalendarEventOverlapModes[props.eventOverlapMode as keyof typeof CalendarEventOverlapModes]\n  })\n\n  const eventWeekdays = computed((): number[] => {\n    return base.effectiveWeekdays.value\n  })\n\n  function eventColorFunction (e: CalendarEvent): string | undefined {\n    return typeof props.eventColor === 'function'\n      ? props.eventColor(e)\n      : e.color || props.eventColor\n  }\n\n  const eventsRef = ref<HTMLElement[]>([])\n\n  function updateEventVisibility () {\n    if (noEvents.value || !props.eventMore) {\n      return\n    }\n\n    const eventHeight = props.eventHeight || 0\n    const eventsMap = getEventsMap()\n\n    for (const date in eventsMap) {\n      const { parent, events, more } = eventsMap[date]\n      if (!more) {\n        break\n      }\n\n      const parentBounds = parent.getBoundingClientRect()\n      const last = events.length - 1\n      const eventsSorted = events.map(event => ({\n        event,\n        bottom: event.getBoundingClientRect().bottom,\n      })).sort((a, b) => a.bottom - b.bottom)\n      let hidden = 0\n\n      for (let i = 0; i <= last; i++) {\n        const bottom = eventsSorted[i].bottom\n        const hide = i === last\n          ? (bottom > parentBounds.bottom)\n          : (bottom + eventHeight > parentBounds.bottom)\n\n        if (hide) {\n          eventsSorted[i].event.style.display = 'none'\n          hidden++\n        }\n      }\n\n      // TODO: avoid direct DOM manipulation\n      if (hidden) {\n        more.style.display = ''\n        more.innerHTML = base.locale.t(props.eventMoreText, hidden)\n      } else {\n        more.style.display = 'none'\n      }\n    }\n  }\n\n  function getEventsMap (): VDailyEventsMap {\n    const eventsMap: VDailyEventsMap = {}\n    const elements = eventsRef.value\n\n    if (!elements || !elements.length) {\n      return eventsMap\n    }\n\n    elements.forEach(el => {\n      const date = el.getAttribute('data-date')\n      if (el.parentElement && date) {\n        if (!(date in eventsMap)) {\n          eventsMap[date] = {\n            parent: el.parentElement,\n            more: null,\n            events: [],\n          }\n        }\n        if (el.getAttribute('data-more')) {\n          eventsMap[date].more = el\n        } else {\n          eventsMap[date].events.push(el)\n          el.style.display = ''\n        }\n      }\n    })\n\n    return eventsMap\n  }\n\n  function genDayEvent ({ event }: CalendarEventVisual, day: CalendarDaySlotScope): VNode {\n    const eventHeight = props.eventHeight || 0\n    const eventMarginBottom = props.eventMarginBottom || 0\n    const dayIdentifier = getDayIdentifier(day)\n    const week = day.week\n    const start = dayIdentifier === event.startIdentifier\n    let end = dayIdentifier === event.endIdentifier\n    let width = WIDTH_START\n\n    if (!categoryMode.value) {\n      for (let i = day.index + 1; i < week.length; i++) {\n        const weekdayIdentifier = getDayIdentifier(week[i])\n        if (event.endIdentifier >= weekdayIdentifier) {\n          width += WIDTH_FULL\n          end = end || weekdayIdentifier === event.endIdentifier\n        } else {\n          end = true\n          break\n        }\n      }\n    }\n    const scope = { eventParsed: event, day, start, end, timed: false }\n\n    return genEvent(event, scope, false, {\n      class: [\n        'v-event',\n        { 'v-event-start': start, 'v-event-end': end },\n      ],\n      style: {\n        height: `${eventHeight}px`,\n        width: `${width}%`,\n        marginBottom: `${eventMarginBottom}px`,\n      },\n      'data-date': day.date,\n    })\n  }\n\n  function genTimedEvent ({ event, left, width }: CalendarEventVisual, day: CalendarDayBodySlotScope): VNode | false {\n    const endDelta = day.timeDelta(event.end)\n    const startDelta = day.timeDelta(event.start)\n    if (\n      endDelta === false ||\n      startDelta === false ||\n      endDelta < 0 ||\n      startDelta >= 1 ||\n      isEventHiddenOn(event, day)\n    ) {\n      return false\n    }\n\n    const dayIdentifier = getDayIdentifier(day)\n    const start = event.startIdentifier >= dayIdentifier\n    const end = event.endIdentifier > dayIdentifier\n    const top = start ? day.timeToY(event.start) : 0\n    const bottom = end ? day.timeToY(MINUTES_IN_DAY) : day.timeToY(event.end)\n    const height = Math.max(props.eventHeight || 0, bottom - top)\n    const scope = { eventParsed: event, day, start, end, timed: true }\n\n    return genEvent(event, scope, true, {\n      class: 'v-event-timed',\n      style: {\n        top: `${top}px`,\n        height: `${height}px`,\n        left: `${left}%`,\n        width: `${width}%`,\n      },\n    })\n  }\n\n  function genEvent (\n    event: CalendarEventParsed,\n    scopeInput: VEventScopeInput,\n    timedEvent: boolean,\n    data: Record<string, unknown>\n  ): VNode {\n    const slot = slots.event\n    const text = eventTextColorFunction.value(event.input)\n    const background = eventColorFunction(event.input)\n    const overlapsNoon = event.start.hour < 12 && event.end.hour >= 12\n    const singline = diffMinutes(event.start, event.end) <= parsedEventOverlapThreshold.value\n    const formatTime = (withTime: CalendarTimestamp, ampm: boolean): string => {\n      const formatter = base.getFormatter({\n        timeZone: 'UTC',\n        hour: 'numeric',\n        minute: withTime.minute > 0 ? 'numeric' : undefined,\n      })\n      return formatter(withTime, true)\n    }\n\n    const timeSummary = () => formatTime(event.start, overlapsNoon) + ' - ' + formatTime(event.end, true)\n\n    const eventSummary = () => {\n      const name = eventNameFunction.value(event, timedEvent)\n      if (event.start.hasTime) {\n        if (timedEvent) {\n          const time = timeSummary()\n          const delimiter = singline ? ', ' : <br />\n\n          return (\n            <span class=\"v-event-summary\">\n              <strong>{ name }</strong>\n              { delimiter }\n              { time }\n            </span>\n          )\n        } else {\n          const time = formatTime(event.start, true)\n\n          return (\n            <span class=\"v-event-summary\">\n              <strong>{ time }</strong> { name }\n            </span>\n          )\n        }\n      }\n\n      return <span class=\"v-event-summary\">{ name }</span>\n    }\n\n    const scope = {\n      ...scopeInput,\n      event: event.input,\n      outside: scopeInput.day.outside,\n      singline,\n      overlapsNoon,\n      formatTime,\n      timeSummary,\n      eventSummary,\n    }\n\n    const events = getPrefixedEventHandlers(attrs, ':event', (nativeEvent: Event) => ({ ...scope, nativeEvent }))\n\n    return (\n      <div\n        { ...base.getColorProps({ text, background }) }\n        { ...events }\n        { ...data }\n        ref_for\n        ref={ eventsRef }\n        v-ripple={ props.eventRipple ?? true }\n      >\n        { slot?.(scope) ?? genName(eventSummary) }\n      </div>\n    )\n  }\n\n  function genName (eventSummary: () => string | VNode): VNode {\n    return (\n      <div class=\"pl-1\">\n        { eventSummary() }\n      </div>\n    )\n  }\n\n  function genPlaceholder (day: CalendarTimestamp): VNode {\n    const height = (props.eventHeight || 0) + (props.eventMarginBottom || 0)\n    return (\n      <div\n        style={{ height: `${height}px` }}\n        data-date={ day.date }\n        ref_for\n        ref={ eventsRef }\n      />\n    )\n  }\n\n  function genMore (day: CalendarDaySlotScope): VNode {\n    const eventHeight = props.eventHeight || 0\n    const eventMarginBottom = props.eventMarginBottom || 0\n    const events = getPrefixedEventHandlers(attrs, ':more', (nativeEvent: Event) => ({ nativeEvent, ...day }))\n\n    return (\n      <div\n        class={['v-event-more pl-1', { 'v-outside': day.outside }]}\n        data-date={ day.date }\n        data-more=\"1\"\n        style={{\n          display: 'none',\n          height: `${eventHeight}px`,\n          marginBottom: `${eventMarginBottom}px`,\n        }}\n        ref_for\n        ref={ eventsRef }\n        v-ripple={ props.eventRipple ?? true }\n        { ...events }\n      />\n    )\n  }\n\n  function getVisibleEvents (): CalendarEventParsed[] {\n    const days = base.days.value\n    const start = getDayIdentifier(days[0])\n    const end = getDayIdentifier(days[days.length - 1])\n\n    return parsedEvents.value.filter(\n      event => isEventOverlapping(event, start, end)\n    )\n  }\n\n  function isEventForCategory (event: CalendarEventParsed, category: CalendarCategory): boolean {\n    return !categoryMode.value ||\n      (typeof category === 'object' && category.categoryName &&\n      category.categoryName === event.category) ||\n      (typeof event.category === 'string' && category === event.category) ||\n      (typeof event.category !== 'string' && category === null)\n  }\n\n  function getEventsForDay (day: CalendarDaySlotScope): CalendarEventParsed[] {\n    const identifier = getDayIdentifier(day)\n    const firstWeekday = eventWeekdays.value[0]\n\n    return parsedEvents.value.filter(\n      event => isEventStart(event, day, identifier, firstWeekday)\n    )\n  }\n\n  function getEventsForDayAll (day: CalendarDaySlotScope): CalendarEventParsed[] {\n    const identifier = getDayIdentifier(day)\n    const firstWeekday = eventWeekdays.value[0]\n\n    return parsedEvents.value.filter(\n      event => event.allDay &&\n        (categoryMode.value ? isEventOn(event, identifier) : isEventStart(event, day, identifier, firstWeekday)) &&\n        isEventForCategory(event, day.category)\n    )\n  }\n\n  function getEventsForDayTimed (day: CalendarDaySlotScope): CalendarEventParsed[] {\n    const identifier = getDayIdentifier(day)\n    return parsedEvents.value.filter(\n      event => !event.allDay &&\n        isEventOn(event, identifier) &&\n        isEventForCategory(event, day.category)\n    )\n  }\n\n  function getScopedSlots () {\n    if (noEvents.value) {\n      return { ...slots }\n    }\n\n    const mode = eventModeFunction.value(\n      parsedEvents.value,\n      eventWeekdays.value[0],\n      parsedEventOverlapThreshold.value\n    )\n\n    const isNode = (input: VNode | false): input is VNode => !!input\n    const getSlotChildren: VEventsToNodes = (day, getter, mapper, timed) => {\n      const events = getter(day)\n      const visuals = mode(day, events, timed, categoryMode.value)\n\n      if (timed) {\n        return visuals.map(visual => mapper(visual, day)).filter(isNode)\n      }\n\n      const children: VNode[] = []\n\n      visuals.forEach((visual, index) => {\n        while (children.length < visual.column) {\n          children.push(genPlaceholder(day) as VNode)\n        }\n\n        const mapped = mapper(visual, day)\n        if (mapped) {\n          children.push(mapped)\n        }\n      })\n\n      return children\n    }\n\n    return {\n      ...slots,\n      day: (day: CalendarDaySlotScope) => {\n        let children = getSlotChildren(day, getEventsForDay, genDayEvent, false)\n        if (children && children.length > 0 && props.eventMore) {\n          children.push(genMore(day) as VNode)\n        }\n        if (slots.day) {\n          const slot = slots.day(day)\n          if (slot) {\n            children = children ? children.concat(slot) : slot\n          }\n        }\n        return children\n      },\n      'day-header': (day: CalendarDaySlotScope) => {\n        let children = getSlotChildren(day, getEventsForDayAll, genDayEvent, false)\n\n        if (slots['day-header']) {\n          const slot = slots['day-header'](day)\n          if (slot) {\n            children = children ? children.concat(slot) : slot\n          }\n        }\n        return children\n      },\n      'day-body': (day: CalendarDayBodySlotScope) => {\n        const events = getSlotChildren(day, getEventsForDayTimed, genTimedEvent, true)\n        let children: VNode[] = [\n          <div class=\"v-event-timed-container\">{ events }</div>,\n        ]\n\n        if (slots['day-body']) {\n          const slot = slots['day-body'](day)\n          if (slot) {\n            children = children.concat(slot)\n          }\n        }\n        return children\n      },\n    }\n  }\n\n  return {\n    ...base,\n    noEvents,\n    parsedEvents,\n    parsedEventOverlapThreshold,\n    eventTimedFunction,\n    eventCategoryFunction,\n    eventTextColorFunction,\n    eventNameFunction,\n    eventModeFunction,\n    eventWeekdays,\n    categoryMode,\n    eventColorFunction,\n    eventsRef,\n    updateEventVisibility,\n    getEventsMap,\n    genDayEvent,\n    genTimedEvent,\n    genEvent,\n    genName,\n    genPlaceholder,\n    genMore,\n    getVisibleEvents,\n    isEventForCategory,\n    getEventsForDay,\n    getEventsForDayAll,\n    getEventsForDayTimed,\n    getScopedSlots,\n  }\n}\n"],"mappings":"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","ignoreList":[]}