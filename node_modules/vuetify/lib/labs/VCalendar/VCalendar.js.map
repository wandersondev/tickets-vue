{"version":3,"file":"VCalendar.js","names":["VCalendarCategory","VCalendarDaily","VCalendarWeekly","makeCalendarBaseProps","makeCalendarWithEventsProps","useCalendarWithEvents","forwardRefs","computed","onMounted","onUpdated","ref","watch","getParsedCategories","copyTimestamp","DAY_MIN","DAYS_IN_MONTH_MAX","DAYS_IN_WEEK","getEndOfMonth","getStartOfMonth","nextDay","prevDay","relativeDays","timestampToDate","updateFormatted","updateRelative","updateWeekday","validateTimestamp","genericComponent","useRender","VCalendar","name","props","modelValue","type","String","Number","Date","validate","categoryDays","default","x","isFinite","parseInt","categories","Array","categoryText","Function","maxDays","categoryHideDynamic","Boolean","categoryShowAll","categoryForInvalid","setup","_ref","slots","attrs","emit","root","base","lastStart","lastEnd","parsedCategoryDays","parsedCategories","renderProps","around","parsedValue","value","component","start","end","getStartOfWeek","getEndOfWeek","parsedStart","parsedEnd","days","getCategoryList","Error","eventWeekdays","effectiveWeekdays","categoryMode","monthLongFormatter","getFormatter","timeZone","month","monthShortFormatter","title","spanYears","year","spanMonths","checkChange","date","move","amount","arguments","length","undefined","moved","forward","mover","limit","times","day","now","getTime","next","prev","noEvents","categoryMap","reduce","map","category","index","categoryName","count","categoryLength","parsedEvents","forEach","ev","filter","hasOwnProperty","updateEventVisibility","window","requestAnimationFrame","Component","_withDirectives","_createVNode","_mergeProps","filterProps","onClick:date","e","getScopedSlots","_resolveDirective","quiet"],"sources":["../../../src/labs/VCalendar/VCalendar.tsx"],"sourcesContent":["// Styles\nimport './VCalendarCategory.sass'\nimport './VCalendarDaily.sass'\nimport './VCalendarWeekly.sass'\n\n// Components\nimport { VCalendarCategory } from './VCalendarCategory'\nimport { VCalendarDaily } from './VCalendarDaily'\nimport { VCalendarWeekly } from './VCalendarWeekly'\n\n// Composables\nimport { makeCalendarBaseProps } from './composables/calendarBase'\nimport { makeCalendarWithEventsProps, useCalendarWithEvents } from './composables/calendarWithEvents'\nimport { forwardRefs } from '@/composables/forwardRefs'\n\n// Utilities\nimport { computed, onMounted, onUpdated, ref, watch } from 'vue'\nimport { getParsedCategories } from './util/parser'\nimport {\n  copyTimestamp,\n  DAY_MIN,\n  DAYS_IN_MONTH_MAX,\n  DAYS_IN_WEEK,\n  getEndOfMonth,\n  getStartOfMonth,\n  nextDay,\n  prevDay,\n  relativeDays,\n  timestampToDate,\n  updateFormatted,\n  updateRelative,\n  updateWeekday,\n  validateTimestamp,\n} from './util/timestamp'\nimport { genericComponent, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type {\n  CalendarCategory, CalendarCategoryTextFunction,\n  CalendarDayBodySlotScope,\n  CalendarDaySlotScope, CalendarEvent, CalendarEventParsed,\n  CalendarTimestamp,\n} from './types'\nimport type { EventProp, GenericProps, JSXComponent } from '@/util'\n\n// Types\ninterface VCalendarRenderProps {\n  start: CalendarTimestamp\n  end: CalendarTimestamp\n  component: JSXComponent & { filterProps: <T>(props: T) => Partial<T> }\n  maxDays: number\n  categories: CalendarCategory[]\n}\n\ninterface EventSlotScope {\n  event: CalendarEvent\n  outside: boolean\n  singline: boolean\n  overlapsNoon: boolean\n  formatTime: (withTime: CalendarTimestamp, ampm: boolean) => string\n  timeSummary: () => string\n  eventSummary: () => JSX.Element\n  eventParsed: CalendarEventParsed\n  day: CalendarDaySlotScope\n  start: boolean\n  end: boolean\n  timed: boolean\n}\n\ninterface DaySlotScope extends CalendarTimestamp {\n  outside: boolean\n  index: number\n  week: CalendarTimestamp[]\n}\n\ninterface DayHeaderSlotScope extends CalendarTimestamp {\n  index: number\n  week: CalendarTimestamp[]\n}\n\ninterface CalendarDayCategorySlotScope extends CalendarDayBodySlotScope {\n  category: CalendarCategory\n}\n\nexport const VCalendar = genericComponent<new (\n  props: {\n    [key: `on${Capitalize<string>}:date`]: EventProp<[Event, CalendarTimestamp]>\n    [key: `on${Capitalize<string>}:dayCategory`]: EventProp<[Event, CalendarDayCategorySlotScope]>\n    [key: `on${Capitalize<string>}:day`]: EventProp<[Event, CalendarDayBodySlotScope]>\n    [key: `on${Capitalize<string>}:event`]: EventProp<[Event, EventSlotScope]>\n    [key: `on${Capitalize<string>}:interval`]: EventProp<[Event, CalendarTimestamp]>\n    [key: `on${Capitalize<string>}:more`]: EventProp<[Event, CalendarDaySlotScope]>\n    [key: `on${Capitalize<string>}:timeCategory`]: EventProp<[Event, CalendarDayCategorySlotScope]>\n    [key: `on${Capitalize<string>}:time`]: EventProp<[Event, CalendarDayBodySlotScope]>\n  },\n  slots: {\n    'category': CalendarDayCategorySlotScope\n    'day': DaySlotScope\n    'day-body': CalendarDayBodySlotScope\n    'day-header': DayHeaderSlotScope\n    'day-label': CalendarTimestamp\n    'day-label-header': CalendarTimestamp\n    'day-month': CalendarTimestamp\n    'event': EventSlotScope\n    'interval': CalendarDayCategorySlotScope\n    'interval-header': never\n  },\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VCalendar',\n\n  props: {\n    modelValue: {\n      type: [String, Number, Date] as PropType<string | number | Date>,\n      validate: validateTimestamp,\n    },\n    categoryDays: {\n      type: [Number, String],\n      default: 1,\n      validate: (x: any) => isFinite(parseInt(x)) && parseInt(x) > 0,\n    },\n    categories: {\n      type: [Array, String] as PropType<CalendarCategory[] | string>,\n      default: '',\n    },\n    categoryText: {\n      type: [String, Function] as PropType<string | CalendarCategoryTextFunction>,\n    },\n    maxDays: {\n      type: Number,\n      default: 7,\n    },\n    categoryHideDynamic: {\n      type: Boolean,\n    },\n    categoryShowAll: {\n      type: Boolean,\n    },\n    categoryForInvalid: {\n      type: String,\n      default: '',\n    },\n\n    ...makeCalendarBaseProps(),\n    ...makeCalendarWithEventsProps(),\n  },\n\n  setup (props, { slots, attrs, emit }) {\n    const root = ref<VCalendarWeekly | VCalendarDaily | VCalendarCategory>()\n    const base = useCalendarWithEvents(props, slots, attrs)\n\n    const lastStart = ref<CalendarTimestamp | null>(null)\n    const lastEnd = ref<CalendarTimestamp | null>(null)\n\n    const parsedCategoryDays = computed((): number => {\n      return parseInt(String(props.categoryDays)) || 1\n    })\n\n    const parsedCategories = computed((): CalendarCategory[] => {\n      return getParsedCategories(props.categories, props.categoryText)\n    })\n\n    const renderProps = computed((): VCalendarRenderProps => {\n      const around = base.parsedValue.value\n      let component: any = null\n      let maxDays = props.maxDays\n      let categories = parsedCategories.value\n      let start = around\n      let end = around\n\n      switch (props.type) {\n        case 'month':\n          component = VCalendarWeekly\n          start = getStartOfMonth(around)\n          end = getEndOfMonth(around)\n          break\n        case 'week':\n          component = VCalendarDaily\n          start = base.getStartOfWeek(around)\n          end = base.getEndOfWeek(around)\n          maxDays = 7\n          break\n        case 'day':\n          component = VCalendarDaily\n          maxDays = 1\n          break\n        case '4day':\n          component = VCalendarDaily\n          end = relativeDays(copyTimestamp(end), nextDay, 3)\n          updateFormatted(end)\n          maxDays = 4\n          break\n        case 'custom-weekly':\n          component = VCalendarWeekly\n          start = base.parsedStart.value || around\n          end = base.parsedEnd.value\n          break\n        case 'custom-daily':\n          component = VCalendarDaily\n          start = base.parsedStart.value || around\n          end = base.parsedEnd.value\n          break\n        case 'category':\n          const days = parsedCategoryDays.value\n\n          component = VCalendarCategory\n          end = relativeDays(copyTimestamp(end), nextDay, days)\n          updateFormatted(end)\n          maxDays = days\n\n          categories = getCategoryList(categories)\n          break\n        default:\n          const type = props.type satisfies never\n          throw new Error(`${type} is not a valid Calendar type`)\n      }\n\n      return { component, start, end, maxDays, categories }\n    })\n\n    const eventWeekdays = computed((): number[] => {\n      return base.effectiveWeekdays.value\n    })\n\n    const categoryMode = computed((): boolean => {\n      return props.type === 'category'\n    })\n\n    const monthLongFormatter = computed(() => {\n      return base.getFormatter({\n        timeZone: 'UTC', month: 'long',\n      })\n    })\n\n    const monthShortFormatter = computed(() => {\n      return base.getFormatter({\n        timeZone: 'UTC', month: 'short',\n      })\n    })\n\n    const title = computed((): string => {\n      const { start, end } = renderProps.value\n      const spanYears = start.year !== end.year\n      const spanMonths = spanYears || start.month !== end.month\n\n      if (spanYears) {\n        return monthShortFormatter.value(start, true) + ' ' + start.year + ' - ' + monthShortFormatter.value(end, true) + ' ' + end.year\n      }\n\n      if (spanMonths) {\n        return monthShortFormatter.value(start, true) + ' - ' + monthShortFormatter.value(end, true) + ' ' + end.year\n      } else {\n        return monthLongFormatter.value(start, false) + ' ' + start.year\n      }\n    })\n\n    function checkChange (): void {\n      const { start, end } = renderProps.value\n      if (!lastStart.value || !lastEnd.value ||\n        start.date !== lastStart.value.date ||\n        end.date !== lastEnd.value.date) {\n        lastStart.value = start\n        lastEnd.value = end\n        emit('change', { start, end })\n      }\n    }\n\n    function move (amount = 1): void {\n      const moved = copyTimestamp(base.parsedValue.value)\n      const forward = amount > 0\n      const mover = forward ? nextDay : prevDay\n      const limit = forward ? DAYS_IN_MONTH_MAX : DAY_MIN\n      let times = forward ? amount : -amount\n\n      while (--times >= 0) {\n        switch (props.type) {\n          case 'month':\n            moved.day = limit\n            mover(moved)\n            break\n          case 'week':\n            relativeDays(moved, mover, DAYS_IN_WEEK)\n            break\n          case 'day':\n            relativeDays(moved, mover, 1)\n            break\n          case '4day':\n            relativeDays(moved, mover, 4)\n            break\n          case 'category':\n            relativeDays(moved, mover, parsedCategoryDays.value)\n            break\n        }\n      }\n\n      updateWeekday(moved)\n      updateFormatted(moved)\n      updateRelative(moved, base.times.now)\n\n      if (props.modelValue instanceof Date) {\n        emit('update:modelValue', timestampToDate(moved))\n      } else if (typeof props.modelValue === 'number') {\n        emit('update:modelValue', timestampToDate(moved).getTime())\n      } else {\n        emit('update:modelValue', moved.date)\n      }\n\n      emit('moved', moved)\n    }\n\n    function next (amount = 1): void {\n      move(amount)\n    }\n\n    function prev (amount = 1): void {\n      move(-amount)\n    }\n\n    function getCategoryList (categories: CalendarCategory[]): CalendarCategory[] {\n      if (!base.noEvents.value) {\n        const categoryMap: any = categories.reduce((map: any, category, index) => {\n          if (typeof category === 'object' && category.categoryName) map[category.categoryName] = { index, count: 0 }\n          else if (typeof category === 'string') map[category] = { index, count: 0 }\n          return map\n        }, {})\n\n        if (!props.categoryHideDynamic || !props.categoryShowAll) {\n          let categoryLength = categories.length\n\n          base.parsedEvents.value.forEach(ev => {\n            let category = ev.category\n\n            if (typeof category !== 'string') {\n              category = props.categoryForInvalid\n            }\n\n            if (!category) {\n              return\n            }\n\n            if (category in categoryMap) {\n              categoryMap[category].count++\n            } else if (!props.categoryHideDynamic) {\n              categoryMap[category] = {\n                index: categoryLength++,\n                count: 1,\n              }\n            }\n          })\n        }\n\n        if (!props.categoryShowAll) {\n          for (const category in categoryMap) {\n            if (categoryMap[category].count === 0) {\n              delete categoryMap[category]\n            }\n          }\n        }\n\n        categories = categories.filter((category: CalendarCategory) => {\n          if (typeof category === 'object' && category.categoryName) {\n            return categoryMap.hasOwnProperty(category.categoryName)\n          } else if (typeof category === 'string') {\n            return categoryMap.hasOwnProperty(category)\n          }\n          return false\n        })\n      }\n      return categories\n    }\n\n    watch(renderProps, checkChange)\n\n    onMounted(() => {\n      base.updateEventVisibility()\n      checkChange()\n    })\n\n    onUpdated(() => {\n      window.requestAnimationFrame(base.updateEventVisibility)\n    })\n\n    useRender(() => {\n      const { start, end, maxDays, component: Component, categories } = renderProps.value\n      return (\n        <Component\n          ref={ root }\n          class={['v-calendar', { 'v-calendar-events': !base.noEvents.value }]}\n          v-resize_quiet={ base.updateEventVisibility }\n          role=\"grid\"\n          { ...Component.filterProps(props) }\n          start={ start.date }\n          end={ end.date }\n          maxDays={ maxDays }\n          weekdays={ base.effectiveWeekdays.value }\n          categories={ categories }\n          onClick:date={ (e: MouseEvent, day: CalendarTimestamp) => {\n            if (attrs['onUpdate:modelValue']) emit('update:modelValue', day.date)\n          }}\n          v-slots={ base.getScopedSlots() }\n        />\n      )\n    })\n\n    return forwardRefs({\n      ...base,\n      lastStart,\n      lastEnd,\n      parsedCategoryDays,\n      renderProps,\n      eventWeekdays,\n      categoryMode,\n      title,\n      monthLongFormatter,\n      monthShortFormatter,\n      parsedCategories,\n      checkChange,\n      move,\n      next,\n      prev,\n      getCategoryList,\n    }, root)\n  },\n})\n\nexport type VCalendar = InstanceType<typeof VCalendar>\n"],"mappings":"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","ignoreList":[]}