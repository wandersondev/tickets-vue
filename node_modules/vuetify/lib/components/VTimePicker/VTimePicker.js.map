{"version":3,"file":"VTimePicker.js","names":["pad","VTimePickerClock","VTimePickerControls","makeVPickerProps","VPicker","useLocale","useProxiedModel","computed","onMounted","ref","watch","createRange","genericComponent","omit","propsFactory","useRender","rangeHours24","rangeHours12am","rangeHours12pm","map","v","range60","makeVTimePickerProps","allowedHours","Function","Array","allowedMinutes","allowedSeconds","disabled","Boolean","format","type","String","default","max","min","viewMode","period","validator","includes","modelValue","readonly","scrollable","useSeconds","title","VTimePicker","name","props","emits","val","setup","_ref","emit","slots","t","inputHour","inputMinute","inputSecond","lazyInputHour","lazyInputMinute","lazyInputSecond","controlsRef","clockRef","isAllowedHourCb","cb","minHour","Number","split","maxHour","isAllowedMinuteCb","isHourAllowed","value","minMinute","maxMinute","minTime","maxTime","time","isAllowedSecondCb","isMinuteAllowed","minSecond","maxSecond","isAmPm","setPeriod","setInputData","genValue","emitValue","convert24to12","hour","convert12to24","Date","getHours","getMinutes","getSeconds","minute","second","trim","toLowerCase","match","parseInt","firstAllowed","allowedFn","range","first","find","length","newHour","onInput","onChange","emitChange","pickerProps","filterProps","timePickerControlsProps","timePickerClockProps","_createVNode","_mergeProps","undefined","class","style","_createElementVNode","header","actions"],"sources":["../../../src/components/VTimePicker/VTimePicker.tsx"],"sourcesContent":["// Styles\nimport './VTimePicker.sass'\n\n// Components\nimport { pad } from './util'\nimport { VTimePickerClock } from './VTimePickerClock'\nimport { VTimePickerControls } from './VTimePickerControls'\nimport { makeVPickerProps, VPicker } from '@/labs/VPicker/VPicker'\n\n// Composables\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { computed, onMounted, ref, watch } from 'vue'\nimport { createRange, genericComponent, omit, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { VTimePickerViewMode } from './shared'\nimport type { VPickerSlots } from '@/labs/VPicker/VPicker'\n\ntype Period = 'am' | 'pm'\ntype AllowFunction = (val: number) => boolean\n\nconst rangeHours24 = createRange(24)\nconst rangeHours12am = createRange(12)\nconst rangeHours12pm = rangeHours12am.map(v => v + 12)\nconst range60 = createRange(60)\n\nexport type VTimePickerSlots = Omit<VPickerSlots, 'header'>\n\nexport const makeVTimePickerProps = propsFactory({\n  allowedHours: [Function, Array] as PropType<AllowFunction | number[]>,\n  allowedMinutes: [Function, Array] as PropType<AllowFunction | number[]>,\n  allowedSeconds: [Function, Array] as PropType<AllowFunction | number[]>,\n  disabled: Boolean,\n  format: {\n    type: String as PropType<'ampm' | '24hr'>,\n    default: 'ampm',\n  },\n  max: String,\n  min: String,\n  viewMode: {\n    type: String as PropType<VTimePickerViewMode>,\n    default: 'hour',\n  },\n  period: {\n    type: String as PropType<Period>,\n    default: 'am',\n    validator: (v: any) => ['am', 'pm'].includes(v),\n  },\n  modelValue: null as any as PropType<any>,\n  readonly: Boolean,\n  scrollable: Boolean,\n  useSeconds: Boolean,\n  ...omit(makeVPickerProps({ title: '$vuetify.timePicker.title' }), ['landscape']),\n}, 'VTimePicker')\n\nexport const VTimePicker = genericComponent<VTimePickerSlots>()({\n  name: 'VTimePicker',\n\n  props: makeVTimePickerProps(),\n\n  emits: {\n    'update:hour': (val: number) => true,\n    'update:minute': (val: number) => true,\n    'update:period': (val: Period) => true,\n    'update:second': (val: number) => true,\n    'update:modelValue': (val: string) => true,\n    'update:viewMode': (val: VTimePickerViewMode) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const { t } = useLocale()\n    const inputHour = ref(null as number | null)\n    const inputMinute = ref(null as number | null)\n    const inputSecond = ref(null as number | null)\n    const lazyInputHour = ref(null as number | null)\n    const lazyInputMinute = ref(null as number | null)\n    const lazyInputSecond = ref(null as number | null)\n    const period = useProxiedModel(props, 'period', 'am')\n    const viewMode = useProxiedModel(props, 'viewMode', 'hour')\n    const controlsRef = ref<VTimePickerControls | null>(null)\n    const clockRef = ref<VTimePickerClock | null>(null)\n\n    const isAllowedHourCb = computed((): AllowFunction => {\n      let cb: AllowFunction\n\n      if (props.allowedHours instanceof Array) {\n        cb = (val: number) => (props.allowedHours as number[]).includes(val)\n      } else {\n        cb = props.allowedHours as AllowFunction\n      }\n\n      if (!props.min && !props.max) return cb\n\n      const minHour = props.min ? Number(props.min.split(':')[0]) : 0\n      const maxHour = props.max ? Number(props.max.split(':')[0]) : 23\n\n      return (val: number) => {\n        return val >= Number(minHour) &&\n          val <= Number(maxHour) &&\n          (!cb || cb(val))\n      }\n    })\n\n    const isAllowedMinuteCb = computed((): AllowFunction => {\n      let cb: AllowFunction\n\n      const isHourAllowed = !isAllowedHourCb.value || inputHour.value === null || isAllowedHourCb.value(inputHour.value)\n      if (props.allowedMinutes instanceof Array) {\n        cb = (val: number) => (props.allowedMinutes as number[]).includes(val)\n      } else {\n        cb = props.allowedMinutes as AllowFunction\n      }\n\n      if (!props.min && !props.max) {\n        return isHourAllowed ? cb : () => false\n      }\n\n      const [minHour, minMinute] = props.min ? props.min.split(':').map(Number) : [0, 0]\n      const [maxHour, maxMinute] = props.max ? props.max.split(':').map(Number) : [23, 59]\n      const minTime = minHour * 60 + Number(minMinute)\n      const maxTime = maxHour * 60 + Number(maxMinute)\n\n      return (val: number) => {\n        const time = 60 * inputHour.value! + val\n        return time >= minTime &&\n          time <= maxTime &&\n          isHourAllowed &&\n          (!cb || cb(val))\n      }\n    })\n\n    const isAllowedSecondCb = computed((): AllowFunction => {\n      let cb: AllowFunction\n\n      const isHourAllowed = !isAllowedHourCb.value || inputHour.value === null || isAllowedHourCb.value(inputHour.value)\n      const isMinuteAllowed = isHourAllowed &&\n        (!isAllowedMinuteCb.value ||\n          inputMinute.value === null ||\n          isAllowedMinuteCb.value(inputMinute.value)\n        )\n\n      if (props.allowedSeconds instanceof Array) {\n        cb = (val: number) => (props.allowedSeconds as number[]).includes(val)\n      } else {\n        cb = props.allowedSeconds as AllowFunction\n      }\n\n      if (!props.min && !props.max) {\n        return isMinuteAllowed ? cb : () => false\n      }\n\n      const [minHour, minMinute, minSecond] = props.min ? props.min.split(':').map(Number) : [0, 0, 0]\n      const [maxHour, maxMinute, maxSecond] = props.max ? props.max.split(':').map(Number) : [23, 59, 59]\n      const minTime = minHour * 3600 + minMinute * 60 + Number(minSecond || 0)\n      const maxTime = maxHour * 3600 + maxMinute * 60 + Number(maxSecond || 0)\n\n      return (val: number) => {\n        const time = 3600 * inputHour.value! + 60 * inputMinute.value! + val\n        return time >= minTime &&\n          time <= maxTime &&\n          isMinuteAllowed &&\n          (!cb || cb(val))\n      }\n    })\n\n    const isAmPm = computed((): boolean => {\n      return props.format === 'ampm'\n    })\n\n    watch(() => props.period, val => setPeriod(val))\n\n    watch(() => props.modelValue, val => setInputData(val))\n\n    onMounted(() => {\n      setInputData(props.modelValue)\n    })\n\n    function genValue () {\n      if (inputHour.value != null && inputMinute.value != null && (!props.useSeconds || inputSecond.value != null)) {\n        return `${pad(inputHour.value)}:${pad(inputMinute.value)}` + (props.useSeconds ? `:${pad(inputSecond.value!)}` : '')\n      }\n\n      return null\n    }\n\n    function emitValue () {\n      const value = genValue()\n      if (value !== null) emit('update:modelValue', value)\n    }\n\n    function convert24to12 (hour: number) {\n      return hour ? ((hour - 1) % 12 + 1) : 12\n    }\n\n    function convert12to24 (hour: number, period: Period) {\n      return hour % 12 + (period === 'pm' ? 12 : 0)\n    }\n\n    function setInputData (value: string | null | Date) {\n      if (value == null || value === '') {\n        inputHour.value = null\n        inputMinute.value = null\n        inputSecond.value = null\n      } else if (value instanceof Date) {\n        inputHour.value = value.getHours()\n        inputMinute.value = value.getMinutes()\n        inputSecond.value = value.getSeconds()\n      } else {\n        const [hour, , minute, , second, period] = value.trim().toLowerCase().match(/^(\\d+):(\\d+)(:(\\d+))?([ap]m)?$/) || new Array(6)\n\n        inputHour.value = period ? convert12to24(parseInt(hour, 10), period as Period) : parseInt(hour, 10)\n        inputMinute.value = parseInt(minute, 10)\n        inputSecond.value = parseInt(second || 0, 10)\n      }\n\n      period.value = (inputHour.value == null || inputHour.value < 12) ? 'am' : 'pm'\n    }\n\n    function firstAllowed (type: VTimePickerViewMode, value: number) {\n      const allowedFn = type === 'hour' ? isAllowedHourCb.value : (type === 'minute' ? isAllowedMinuteCb.value : isAllowedSecondCb.value)\n      if (!allowedFn) return value\n\n      // TODO: clean up (Note from V2 code)\n      const range = type === 'minute'\n        ? range60\n        : (type === 'second'\n          ? range60\n          : (isAmPm.value\n            ? (value < 12\n              ? rangeHours12am\n              : rangeHours12pm)\n            : rangeHours24))\n      const first = range.find(v => allowedFn((v + value) % range.length + range[0]))\n      return ((first || 0) + value) % range.length + range[0]\n    }\n\n    function setPeriod (val: Period) {\n      period.value = val\n      if (inputHour.value != null) {\n        const newHour = inputHour.value! + (period.value === 'am' ? -12 : 12)\n        inputHour.value = firstAllowed('hour', newHour)\n      }\n      emit('update:period', val)\n      emitValue()\n      return true\n    }\n\n    function onInput (value: number) {\n      if (viewMode.value === 'hour') {\n        inputHour.value = isAmPm.value ? convert12to24(value, period.value) : value\n      } else if (viewMode.value === 'minute') {\n        inputMinute.value = value\n      } else {\n        inputSecond.value = value\n      }\n    }\n\n    function onChange (value: number) {\n      switch (viewMode.value || 'hour') {\n        case 'hour':\n          emit('update:hour', value)\n          break\n        case 'minute':\n          emit('update:minute', value)\n          break\n        case 'second':\n          emit('update:second', value)\n          break\n        default:\n          break\n      }\n\n      const emitChange = inputHour.value !== null && inputMinute.value !== null && (props.useSeconds ? inputSecond.value !== null : true)\n      if (viewMode.value === 'hour') {\n        viewMode.value = 'minute'\n      } else if (props.useSeconds && viewMode.value === 'minute') {\n        viewMode.value = 'second'\n      }\n\n      if (inputHour.value === lazyInputHour.value &&\n        inputMinute.value === lazyInputMinute.value &&\n        (!props.useSeconds || inputSecond.value === lazyInputSecond.value)\n      ) return\n\n      const time = genValue()\n      if (time === null) return\n\n      lazyInputHour.value = inputHour.value\n      lazyInputMinute.value = inputMinute.value\n      props.useSeconds && (lazyInputSecond.value = inputSecond.value)\n\n      emitChange && emitValue()\n    }\n\n    useRender(() => {\n      const pickerProps = VPicker.filterProps(props)\n      const timePickerControlsProps = VTimePickerControls.filterProps(props)\n      const timePickerClockProps = VTimePickerClock.filterProps(omit(props, ['format', 'modelValue', 'min', 'max']))\n\n      return (\n        <VPicker\n          { ...pickerProps }\n          color={ undefined }\n          class={[\n            'v-time-picker',\n            props.class,\n          ]}\n          style={ props.style }\n          v-slots={{\n            title: () => slots.title?.() ?? (\n              <div class=\"v-time-picker__title\">\n                { t(props.title) }\n              </div>\n            ),\n            header: () => (\n              <VTimePickerControls\n                { ...timePickerControlsProps }\n                ampm={ isAmPm.value }\n                hour={ inputHour.value as number }\n                minute={ inputMinute.value as number }\n                period={ period.value }\n                second={ inputSecond.value as number }\n                viewMode={ viewMode.value }\n                onUpdate:period={ (val: Period) => setPeriod(val) }\n                onUpdate:viewMode={ (value: VTimePickerViewMode) => (viewMode.value = value) }\n                ref={ controlsRef }\n              />\n            ),\n            default: () => (\n              <VTimePickerClock\n                { ...timePickerClockProps }\n                allowedValues={\n                  viewMode.value === 'hour'\n                    ? isAllowedHourCb.value\n                    : (viewMode.value === 'minute'\n                      ? isAllowedMinuteCb.value\n                      : isAllowedSecondCb.value)\n                    }\n                double={ viewMode.value === 'hour' && !isAmPm.value }\n                format={ viewMode.value === 'hour'\n                  ? (isAmPm.value ? convert24to12 : (val: number) => val)\n                  : (val: number) => pad(val, 2)\n                }\n                max={ viewMode.value === 'hour' ? (isAmPm.value && period.value === 'am' ? 11 : 23) : 59 }\n                min={ viewMode.value === 'hour' && isAmPm.value && period.value === 'pm' ? 12 : 0 }\n                size={ 20 }\n                step={ viewMode.value === 'hour' ? 1 : 5 }\n                modelValue={ viewMode.value === 'hour'\n                  ? inputHour.value as number\n                  : (viewMode.value === 'minute'\n                    ? inputMinute.value as number\n                    : inputSecond.value as number)\n                }\n                onChange={ onChange }\n                onInput={ onInput }\n                ref={ clockRef }\n              />\n            ),\n            actions: slots.actions,\n          }}\n        />\n      )\n    })\n  },\n})\n\nexport type VTimePicker = InstanceType<typeof VTimePicker>\n"],"mappings":"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","ignoreList":[]}