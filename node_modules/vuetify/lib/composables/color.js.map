{"version":3,"file":"color.js","names":["toValue","destructComputed","getForeground","isCssColor","isParsableColor","parseColor","useColor","colors","class","colorClasses","style","colorStyles","computeColor","useTextColor","color","textColorClasses","textColorStyles","text","useBackgroundColor","backgroundColorClasses","backgroundColorStyles","background","_colors","classes","styles","backgroundColor","a","textColor","caretColor","push"],"sources":["../../src/composables/color.ts"],"sourcesContent":["// Utilities\nimport { toValue } from 'vue'\nimport { destructComputed, getForeground, isCssColor, isParsableColor, parseColor } from '@/util'\n\n// Types\nimport type { CSSProperties, MaybeRefOrGetter, Ref } from 'vue'\n\nexport type ColorValue = string | false | null | undefined\n\nexport interface TextColorData {\n  textColorClasses: Ref<string[]>\n  textColorStyles: Ref<CSSProperties>\n}\n\nexport interface BackgroundColorData {\n  backgroundColorClasses: Ref<string[]>\n  backgroundColorStyles: Ref<CSSProperties>\n}\n\n// Composables\nexport function useColor (colors: MaybeRefOrGetter<{ background?: ColorValue, text?: ColorValue }>) {\n  return destructComputed(() => {\n    const {\n      class: colorClasses,\n      style: colorStyles,\n    } = computeColor(colors)\n\n    return { colorClasses, colorStyles }\n  })\n}\n\nexport function useTextColor (color: MaybeRefOrGetter<ColorValue>): TextColorData {\n  const {\n    colorClasses: textColorClasses,\n    colorStyles: textColorStyles,\n  } = useColor(() => ({\n    text: toValue(color),\n  }))\n\n  return { textColorClasses, textColorStyles }\n}\n\nexport function useBackgroundColor (color: MaybeRefOrGetter<ColorValue>): BackgroundColorData {\n  const {\n    colorClasses: backgroundColorClasses,\n    colorStyles: backgroundColorStyles,\n  } = useColor(() => ({\n    background: toValue(color),\n  }))\n\n  return { backgroundColorClasses, backgroundColorStyles }\n}\n\nexport function computeColor (colors: MaybeRefOrGetter<{ background?: ColorValue, text?: ColorValue }>) {\n  const _colors = toValue(colors)\n  const classes: string[] = []\n  const styles: CSSProperties = {}\n\n  if (_colors.background) {\n    if (isCssColor(_colors.background)) {\n      styles.backgroundColor = _colors.background\n\n      if (!_colors.text && isParsableColor(_colors.background)) {\n        const backgroundColor = parseColor(_colors.background)\n        if (backgroundColor.a == null || backgroundColor.a === 1) {\n          const textColor = getForeground(backgroundColor)\n\n          styles.color = textColor\n          styles.caretColor = textColor\n        }\n      }\n    } else {\n      classes.push(`bg-${_colors.background}`)\n    }\n  }\n\n  if (_colors.text) {\n    if (isCssColor(_colors.text)) {\n      styles.color = _colors.text\n      styles.caretColor = _colors.text\n    } else {\n      classes.push(`text-${_colors.text}`)\n    }\n  }\n\n  return { class: classes, style: styles }\n}\n"],"mappings":"AAAA;AACA,SAASA,OAAO,QAAQ,KAAK;AAAA,SACpBC,gBAAgB,EAAEC,aAAa,EAAEC,UAAU,EAAEC,eAAe,EAAEC,UAAU,4BAEjF;AAeA;AACA,OAAO,SAASC,QAAQA,CAAEC,MAAwE,EAAE;EAClG,OAAON,gBAAgB,CAAC,MAAM;IAC5B,MAAM;MACJO,KAAK,EAAEC,YAAY;MACnBC,KAAK,EAAEC;IACT,CAAC,GAAGC,YAAY,CAACL,MAAM,CAAC;IAExB,OAAO;MAAEE,YAAY;MAAEE;IAAY,CAAC;EACtC,CAAC,CAAC;AACJ;AAEA,OAAO,SAASE,YAAYA,CAAEC,KAAmC,EAAiB;EAChF,MAAM;IACJL,YAAY,EAAEM,gBAAgB;IAC9BJ,WAAW,EAAEK;EACf,CAAC,GAAGV,QAAQ,CAAC,OAAO;IAClBW,IAAI,EAAEjB,OAAO,CAACc,KAAK;EACrB,CAAC,CAAC,CAAC;EAEH,OAAO;IAAEC,gBAAgB;IAAEC;EAAgB,CAAC;AAC9C;AAEA,OAAO,SAASE,kBAAkBA,CAAEJ,KAAmC,EAAuB;EAC5F,MAAM;IACJL,YAAY,EAAEU,sBAAsB;IACpCR,WAAW,EAAES;EACf,CAAC,GAAGd,QAAQ,CAAC,OAAO;IAClBe,UAAU,EAAErB,OAAO,CAACc,KAAK;EAC3B,CAAC,CAAC,CAAC;EAEH,OAAO;IAAEK,sBAAsB;IAAEC;EAAsB,CAAC;AAC1D;AAEA,OAAO,SAASR,YAAYA,CAAEL,MAAwE,EAAE;EACtG,MAAMe,OAAO,GAAGtB,OAAO,CAACO,MAAM,CAAC;EAC/B,MAAMgB,OAAiB,GAAG,EAAE;EAC5B,MAAMC,MAAqB,GAAG,CAAC,CAAC;EAEhC,IAAIF,OAAO,CAACD,UAAU,EAAE;IACtB,IAAIlB,UAAU,CAACmB,OAAO,CAACD,UAAU,CAAC,EAAE;MAClCG,MAAM,CAACC,eAAe,GAAGH,OAAO,CAACD,UAAU;MAE3C,IAAI,CAACC,OAAO,CAACL,IAAI,IAAIb,eAAe,CAACkB,OAAO,CAACD,UAAU,CAAC,EAAE;QACxD,MAAMI,eAAe,GAAGpB,UAAU,CAACiB,OAAO,CAACD,UAAU,CAAC;QACtD,IAAII,eAAe,CAACC,CAAC,IAAI,IAAI,IAAID,eAAe,CAACC,CAAC,KAAK,CAAC,EAAE;UACxD,MAAMC,SAAS,GAAGzB,aAAa,CAACuB,eAAe,CAAC;UAEhDD,MAAM,CAACV,KAAK,GAAGa,SAAS;UACxBH,MAAM,CAACI,UAAU,GAAGD,SAAS;QAC/B;MACF;IACF,CAAC,MAAM;MACLJ,OAAO,CAACM,IAAI,CAAC,MAAMP,OAAO,CAACD,UAAU,EAAE,CAAC;IAC1C;EACF;EAEA,IAAIC,OAAO,CAACL,IAAI,EAAE;IAChB,IAAId,UAAU,CAACmB,OAAO,CAACL,IAAI,CAAC,EAAE;MAC5BO,MAAM,CAACV,KAAK,GAAGQ,OAAO,CAACL,IAAI;MAC3BO,MAAM,CAACI,UAAU,GAAGN,OAAO,CAACL,IAAI;IAClC,CAAC,MAAM;MACLM,OAAO,CAACM,IAAI,CAAC,QAAQP,OAAO,CAACL,IAAI,EAAE,CAAC;IACtC;EACF;EAEA,OAAO;IAAET,KAAK,EAAEe,OAAO;IAAEb,KAAK,EAAEc;EAAO,CAAC;AAC1C","ignoreList":[]}